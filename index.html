<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday Shehaa! üéÄ</title>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --pink: #f9a8d4;
    --pink-deep: #ec4899;
    --purple: #c084fc;
    --purple-deep: #9333ea;
    --lavender: #e9d5ff;
    --cream: #fdf4ff;
    --white: #ffffff;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Quicksand', sans-serif;
    background: var(--cream);
    overflow-x: hidden;
    cursor: none;
  }

  /* Custom cursor */
  .cursor {
    width: 20px; height: 20px;
    background: var(--pink-deep);
    border-radius: 50%;
    position: fixed;
    pointer-events: none;
    z-index: 9999;
    transform: translate(-50%, -50%);
    transition: transform 0.1s ease, background 0.2s;
    mix-blend-mode: multiply;
  }

  /* ---- FLOATING CONFETTI BG ---- */
  .confetti-bg {
    position: fixed; inset: 0; z-index: 0; pointer-events: none; overflow: hidden;
  }
  .dot {
    position: absolute;
    border-radius: 50%;
    opacity: 0.35;
    animation: floatUp linear infinite;
  }

  @keyframes floatUp {
    0% { transform: translateY(110vh) rotate(0deg); opacity: 0.4; }
    100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
  }

  /* ---- SCREENS ---- */
  .screen {
    display: none;
    min-height: 100vh;
    position: relative;
    z-index: 1;
  }
  .screen.active { display: flex; }

  /* ============ SCREEN 1: LANDING ============ */
  #s1 {
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 2rem;
    gap: 1.5rem;
  }

  .birthday-title {
    font-family: 'Pacifico', cursive;
    font-size: clamp(2.5rem, 8vw, 5rem);
    background: linear-gradient(135deg, var(--pink-deep), var(--purple-deep));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1.2;
    animation: popIn 0.8s cubic-bezier(0.34,1.56,0.64,1) both;
  }

  .subtitle {
    font-size: 1.3rem;
    color: #a855f7;
    font-weight: 600;
    animation: fadeUp 0.8s 0.3s both;
  }

  .cake-emoji {
    font-size: 5rem;
    animation: bounce 1.5s ease-in-out infinite;
    display: block;
  }

  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-12px); }
  }

  @keyframes popIn {
    from { opacity: 0; transform: scale(0.5); }
    to { opacity: 1; transform: scale(1); }
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .btn {
    display: inline-block;
    padding: 1rem 2.5rem;
    border-radius: 50px;
    font-family: 'Quicksand', sans-serif;
    font-weight: 700;
    font-size: 1.1rem;
    cursor: pointer;
    border: none;
    transition: transform 0.2s, box-shadow 0.2s;
    animation: fadeUp 0.8s 0.5s both;
  }

  .btn-primary {
    background: linear-gradient(135deg, var(--pink-deep), var(--purple-deep));
    color: white;
    box-shadow: 0 6px 20px rgba(236,72,153,0.4);
  }

  .btn:hover { transform: translateY(-3px) scale(1.05); box-shadow: 0 10px 30px rgba(236,72,153,0.5); }
  .btn:active { transform: scale(0.97); }

  /* ============ SCREEN 2: QUIZ ============ */
  #s2 {
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    gap: 1.5rem;
  }

  .section-title {
    font-family: 'Pacifico', cursive;
    font-size: clamp(1.8rem, 5vw, 3rem);
    background: linear-gradient(135deg, var(--pink-deep), var(--purple-deep));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-align: center;
  }

  .quiz-card {
    background: white;
    border-radius: 24px;
    padding: 2rem;
    max-width: 560px;
    width: 100%;
    box-shadow: 0 8px 40px rgba(192,132,252,0.2);
    border: 2px solid var(--lavender);
    animation: fadeUp 0.5s both;
  }

  .quiz-q {
    font-size: 1.15rem;
    font-weight: 700;
    color: #7c3aed;
    margin-bottom: 1.2rem;
    text-align: center;
  }

  .quiz-counter {
    font-size: 0.85rem;
    color: #c084fc;
    text-align: center;
    margin-bottom: 0.5rem;
    font-weight: 600;
  }

  .options {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.75rem;
  }

  .option-btn {
    padding: 0.9rem 1rem;
    border-radius: 16px;
    border: 2px solid var(--lavender);
    background: var(--cream);
    font-family: 'Quicksand', sans-serif;
    font-weight: 600;
    font-size: 0.95rem;
    color: #7c3aed;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
  }

  .option-btn:hover { background: var(--lavender); transform: scale(1.03); }
  .option-btn.correct { background: #bbf7d0; border-color: #4ade80; color: #166534; }
  .option-btn.wrong { background: #fecaca; border-color: #f87171; color: #991b1b; }

  .quiz-feedback {
    text-align: center;
    font-weight: 700;
    font-size: 1.1rem;
    margin-top: 1rem;
    min-height: 1.5rem;
    color: #7c3aed;
  }

  .score-display {
    text-align: center;
    font-size: 1rem;
    color: #a855f7;
    font-weight: 600;
  }

  /* ============ SCREEN 3: REVEAL ============ */
  #s3 {
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    gap: 1rem;
  }

  .notes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 1rem;
    max-width: 640px;
    width: 100%;
  }

  .note-card {
    background: white;
    border-radius: 20px;
    padding: 1.5rem 1rem;
    text-align: center;
    box-shadow: 0 4px 20px rgba(192,132,252,0.15);
    border: 2px solid var(--lavender);
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    position: relative;
    overflow: hidden;
    min-height: 130px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .note-card:not(.revealed):hover { transform: scale(1.05) rotate(-1deg); box-shadow: 0 8px 30px rgba(192,132,252,0.3); }

  .note-front {
    font-size: 2.5rem;
    transition: opacity 0.3s;
  }

  .note-back {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, #fdf2f8, #faf5ff);
    border-radius: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.75rem;
    font-size: 0.9rem;
    font-weight: 600;
    color: #7c3aed;
    opacity: 0;
    transition: opacity 0.3s;
    line-height: 1.4;
  }

  .note-card.revealed .note-front { opacity: 0; }
  .note-card.revealed .note-back { opacity: 1; }

  .reveal-hint {
    font-size: 0.9rem;
    color: #c084fc;
    font-weight: 600;
    text-align: center;
  }

  /* ============ SCREEN 4: GAME ============ */
  #s4 {
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 1.5rem;
    gap: 1rem;
  }

  #gameCanvas {
    border-radius: 20px;
    border: 3px solid var(--pink);
    box-shadow: 0 8px 40px rgba(249,168,212,0.3);
    cursor: none;
    touch-action: none;
    display: block;
    max-width: 100%;
  }

  .game-score {
    font-family: 'Pacifico', cursive;
    font-size: 1.5rem;
    color: var(--purple-deep);
  }

  /* ============ SCREEN 5: FINAL ============ */
  #s5 {
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    gap: 1.5rem;
    text-align: center;
  }

  .final-card {
    background: white;
    border-radius: 28px;
    padding: 2.5rem 2rem;
    max-width: 500px;
    width: 100%;
    box-shadow: 0 10px 50px rgba(192,132,252,0.25);
    border: 2px solid var(--lavender);
    animation: popIn 0.7s cubic-bezier(0.34,1.56,0.64,1) both;
  }

  .final-emoji { font-size: 4rem; animation: bounce 1.5s ease-in-out infinite; display: block; margin-bottom: 1rem; }

  .final-msg {
    font-size: 1.05rem;
    color: #6b21a8;
    line-height: 1.8;
    font-weight: 500;
  }

  .final-name {
    font-family: 'Pacifico', cursive;
    font-size: 2rem;
    background: linear-gradient(135deg, var(--pink-deep), var(--purple-deep));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.5rem;
  }

  /* Nav dots */
  .nav {
    position: fixed;
    bottom: 1.5rem;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 0.5rem;
    z-index: 100;
  }

  .nav-dot {
    width: 10px; height: 10px;
    border-radius: 50%;
    background: var(--lavender);
    border: 2px solid var(--pink);
    transition: all 0.3s;
  }

  .nav-dot.active { background: var(--pink-deep); transform: scale(1.3); }

  /* Firework particle */
  .particle {
    position: fixed;
    border-radius: 50%;
    pointer-events: none;
    z-index: 999;
    animation: burst 0.8s ease-out forwards;
  }

  @keyframes burst {
    to { opacity: 0; transform: translate(var(--tx), var(--ty)) scale(0); }
  }
</style>
</head>
<body>

<div class="cursor" id="cursor"></div>
<div class="confetti-bg" id="confettiBg"></div>

<!-- NAV DOTS (hidden until password entered) -->
<div class="nav" id="nav" style="display:none">
  <div class="nav-dot active"></div>
  <div class="nav-dot"></div>
  <div class="nav-dot"></div>
  <div class="nav-dot"></div>
  <div class="nav-dot"></div>
</div>

<!-- SCREEN 0: PASSWORD -->
<div class="screen active" id="s0">
  <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;gap:1.5rem;padding:2rem;text-align:center;">
    <span style="font-size:4rem;animation:bounce 1.5s ease-in-out infinite;display:block">üîê</span>
    <div class="birthday-title" style="font-size:clamp(2rem,6vw,3.5rem)">Psst... who's there?</div>
    <div class="subtitle">Enter the secret password to enter ‚ú®</div>
    <div style="position:relative;max-width:320px;width:100%;">
      <input id="passwordInput" type="password" placeholder="Secret password..."
        style="width:100%;padding:1rem 3rem 1rem 1.5rem;border-radius:50px;border:2.5px solid var(--lavender);font-family:'Quicksand',sans-serif;font-size:1rem;font-weight:600;color:#7c3aed;background:white;outline:none;box-shadow:0 4px 20px rgba(192,132,252,0.15);transition:border 0.2s;"
        onkeydown="if(event.key==='Enter')checkPassword()"
        onfocus="this.style.borderColor='#c084fc'"
        onblur="this.style.borderColor='var(--lavender)'"
      />
      <span id="eyeToggle" onclick="toggleEye()" style="position:absolute;right:1.1rem;top:50%;transform:translateY(-50%);cursor:pointer;font-size:1.2rem;user-select:none;">üëÅÔ∏è</span>
    </div>
    <div id="pwError" style="color:#ec4899;font-weight:700;font-size:0.95rem;min-height:1.2rem;transition:opacity 0.3s;"></div>
    <button class="btn btn-primary" onclick="checkPassword()">Let me in! üå∏</button>
  </div>
</div>

<!-- SCREEN 1: LANDING -->
<div class="screen" id="s1">
  <span class="cake-emoji">üéÇ</span>
  <div class="birthday-title">Happy Birthday<br>Shehaa! üéÄ</div>
  <div class="subtitle">You're turning 29 & absolutely glowing ‚ú®</div>
  <button class="btn btn-primary" onclick="goTo(2)">Let's celebrate! üéâ</button>
</div>

<!-- SCREEN 2: QUIZ -->
<div class="screen" id="s2">
  <div class="section-title">Birthday Quiz! üå∏</div>
  <div class="score-display" id="scoreDisplay">Score: 0 / 5</div>
  <div class="quiz-card" id="quizCard">
    <div class="quiz-counter" id="quizCounter">Question 1 of 5</div>
    <div class="quiz-q" id="quizQ"></div>
    <div class="options" id="quizOptions"></div>
    <div class="quiz-feedback" id="quizFeedback"></div>
  </div>
</div>

<!-- SCREEN 3: REVEAL NOTES -->
<div class="screen" id="s3">
  <div class="section-title">Things that make you üíñ</div>
  <div class="reveal-hint">Tap each card to reveal!</div>
  <div class="notes-grid" id="notesGrid"></div>
  <button class="btn btn-primary" onclick="goTo(4)" style="margin-top:0.5rem">Next up! üéÆ</button>
</div>

<!-- SCREEN 4: MINI GAME -->
<div class="screen" id="s4">
  <div class="section-title">Catch the Hearts! üíï</div>
  <div class="game-score" id="gameScoreDisplay">Score: 0</div>
  <canvas id="gameCanvas" width="400" height="400"></canvas>
  <div style="font-size:0.85rem;color:#c084fc;font-weight:600;">Move your mouse / finger to catch hearts!</div>
  <button class="btn btn-primary" id="gameNextBtn" style="display:none" onclick="goTo(5)">See your gift! üéÅ</button>
</div>

<!-- SCREEN 5: FINAL MESSAGE -->
<div class="screen" id="s5">
  <div class="final-card">
    <span class="final-emoji">üå∑</span>
    <div class="final-name">Happy 29th, Shehaa!</div>
    <p class="final-msg">
      Here's to a year filled with laughter, magic, and every little thing that makes your heart happy. 
      You deserve all the love in the world and then some. 
      May 29 be your most beautiful chapter yet. ü•Ç‚ú®
    </p>
  </div>
  <button class="btn btn-primary" onclick="fireworks(); goTo(1)">üéÜ Again! Again!</button>
</div>

<script>
// ---- PASSWORD ----
function checkPassword() {
  const input = document.getElementById('passwordInput').value;
  const error = document.getElementById('pwError');
  if (input === 'ShehaNapuri') {
    document.getElementById('s0').classList.remove('active');
    document.getElementById('nav').style.display = 'flex';
    goTo(1);
    fireworks();
  } else {
    error.textContent = '‚ùå Hmm, that\'s not right! Try again üíú';
    document.getElementById('passwordInput').style.borderColor = '#f87171';
    document.getElementById('passwordInput').value = '';
    setTimeout(() => {
      error.textContent = '';
      document.getElementById('passwordInput').style.borderColor = 'var(--lavender)';
    }, 2000);
  }
}

function toggleEye() {
  const inp = document.getElementById('passwordInput');
  inp.type = inp.type === 'password' ? 'text' : 'password';
}

// ---- CURSOR ----
const cursor = document.getElementById('cursor');
document.addEventListener('mousemove', e => {
  cursor.style.left = e.clientX + 'px';
  cursor.style.top = e.clientY + 'px';
});

// ---- CONFETTI BG ----
(function() {
  const bg = document.getElementById('confettiBg');
  const colors = ['#f9a8d4','#c084fc','#e9d5ff','#fbcfe8','#ddd6fe','#f0abfc'];
  for (let i = 0; i < 30; i++) {
    const d = document.createElement('div');
    d.className = 'dot';
    const size = Math.random() * 20 + 8;
    d.style.cssText = `
      width:${size}px;height:${size}px;
      left:${Math.random()*100}vw;
      background:${colors[Math.floor(Math.random()*colors.length)]};
      animation-duration:${Math.random()*10+8}s;
      animation-delay:${Math.random()*10}s;
    `;
    bg.appendChild(d);
  }
})();

// ---- NAVIGATION ----
let currentScreen = 1;
const screens = document.querySelectorAll('.screen');
const dots = document.querySelectorAll('.nav-dot');

function goTo(n) {
  screens.forEach(s => { if (s.id !== 's0') s.classList.remove('active'); });
  dots.forEach(d => d.classList.remove('active'));
  document.getElementById('s' + n).classList.add('active');
  dots[n-1].classList.add('active');
  currentScreen = n;
  if (n === 2) initQuiz();
  if (n === 3) initNotes();
  if (n === 4) initGame();
  if (n === 5) fireworks();
}

// ---- QUIZ ----
const questions = [
  { q: "What's the best way to celebrate a birthday?", opts: ["Cake & friends üéÇ", "Netflix & chill üçø", "Dance party! üíÉ", "Spa day üõÅ"], correct: 0, fun: "Cake fixes everything! üéÇ" },
  { q: "You deserve...?", opts: ["The whole world üåç", "Just a little ü§è", "The moon & stars üåô", "All of the above üíñ"], correct: 3, fun: "ALL of the above, always! üíñ" },
  { q: "29 is...?", opts: ["Just a number üî¢", "The best age! ‚ú®", "Getting old üòÖ", "The new 19 üéâ"], correct: 1, fun: "The BEST age! ‚ú®" },
  { q: "What's better than your birthday?", opts: ["Nothing! üéâ", "Every other day üòÖ", "Someone else's üéÅ", "Another birthday? üéÇ"], correct: 0, fun: "Absolutely NOTHING! üéâ" },
  { q: "A birthday wish should be...?", opts: ["Secret always ü§´", "Shouted out loud üì£", "Magical & big ‚ú®", "Kept realistic ü§î"], correct: 2, fun: "Magical & big ‚Äî always dream big! ‚ú®" },
];

let currentQ = 0, score = 0, answered = false;

function initQuiz() {
  currentQ = 0; score = 0; answered = false;
  renderQuestion();
}

function renderQuestion() {
  const q = questions[currentQ];
  document.getElementById('quizCounter').textContent = `Question ${currentQ+1} of ${questions.length}`;
  document.getElementById('quizQ').textContent = q.q;
  document.getElementById('quizFeedback').textContent = '';
  document.getElementById('scoreDisplay').textContent = `Score: ${score} / ${questions.length}`;
  const opts = document.getElementById('quizOptions');
  opts.innerHTML = '';
  q.opts.forEach((o, i) => {
    const btn = document.createElement('button');
    btn.className = 'option-btn';
    btn.textContent = o;
    btn.onclick = () => answerQ(i, btn, q);
    opts.appendChild(btn);
  });
  answered = false;
}

function answerQ(i, btn, q) {
  if (answered) return;
  answered = true;
  const allBtns = document.querySelectorAll('.option-btn');
  allBtns[q.correct].classList.add('correct');
  if (i !== q.correct) { btn.classList.add('wrong'); }
  else { score++; }
  document.getElementById('scoreDisplay').textContent = `Score: ${score} / ${questions.length}`;
  document.getElementById('quizFeedback').textContent = i === q.correct ? '‚úÖ ' + q.fun : 'üíú ' + q.fun;
  setTimeout(() => {
    currentQ++;
    if (currentQ < questions.length) renderQuestion();
    else {
      document.getElementById('quizCard').innerHTML = `
        <div style="text-align:center;padding:1rem">
          <div style="font-size:3rem">üéä</div>
          <div style="font-family:'Pacifico',cursive;font-size:1.5rem;color:#7c3aed;margin:0.5rem 0">You scored ${score}/${questions.length}!</div>
          <div style="color:#a855f7;font-weight:600;margin-bottom:1.5rem">${score >= 4 ? "You know yourself so well! üíñ" : "Keep celebrating! üéâ"}</div>
          <button class="btn btn-primary" onclick="goTo(3)">Next surprise! üéÅ</button>
        </div>`;
    }
  }, 1200);
}

// ---- REVEAL NOTES ----
const notes = [
  { emoji: "‚ú®", text: "Your smile lights up every room" },
  { emoji: "üíê", text: "You make everything more beautiful" },
  { emoji: "üåô", text: "You are absolute magic" },
  { emoji: "üç∞", text: "Sweet in every single way" },
  { emoji: "üí™", text: "Stronger than you know" },
  { emoji: "üå∫", text: "You're one of a kind" },
  { emoji: "üé∂", text: "You make life more fun" },
  { emoji: "üíñ", text: "Endlessly loved & adored" },
];

function initNotes() {
  const grid = document.getElementById('notesGrid');
  grid.innerHTML = '';
  notes.forEach(n => {
    const card = document.createElement('div');
    card.className = 'note-card';
    card.innerHTML = `<div class="note-front">${n.emoji}</div><div class="note-back">${n.text}</div>`;
    card.onclick = () => { card.classList.toggle('revealed'); spawnParticles(card); };
    grid.appendChild(card);
  });
}

// ---- MINI GAME ----
let gameRunning = false, gameInterval, gameScore = 0, hearts = [], basket = { x: 200, y: 370, w: 70, h: 20 };

function initGame() {
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');
  gameScore = 0; hearts = []; gameRunning = true;
  document.getElementById('gameNextBtn').style.display = 'none';
  document.getElementById('gameScoreDisplay').textContent = 'Score: 0';

  canvas.addEventListener('mousemove', e => {
    const r = canvas.getBoundingClientRect();
    basket.x = (e.clientX - r.left) - basket.w / 2;
  });
  canvas.addEventListener('touchmove', e => {
    e.preventDefault();
    const r = canvas.getBoundingClientRect();
    basket.x = (e.touches[0].clientX - r.left) - basket.w / 2;
  }, { passive: false });

  let spawnTimer = 0, gameTime = 0;
  const totalTime = 1800; // ~30s at 60fps

  function spawnHeart() {
    hearts.push({ x: Math.random() * 360 + 20, y: -20, speed: Math.random() * 2 + 1.5, size: Math.random() * 10 + 16 });
  }

  function drawHeart(ctx, x, y, size, color) {
    ctx.save();
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.moveTo(x, y + size * 0.3);
    ctx.bezierCurveTo(x, y, x - size * 0.5, y, x - size * 0.5, y + size * 0.3);
    ctx.bezierCurveTo(x - size * 0.5, y + size * 0.6, x, y + size * 0.85, x, y + size);
    ctx.bezierCurveTo(x, y + size * 0.85, x + size * 0.5, y + size * 0.6, x + size * 0.5, y + size * 0.3);
    ctx.bezierCurveTo(x + size * 0.5, y, x, y, x, y + size * 0.3);
    ctx.fill();
    ctx.restore();
  }

  function loop() {
    if (!gameRunning) return;
    ctx.clearRect(0, 0, 400, 400);

    // Background
    const grad = ctx.createLinearGradient(0,0,0,400);
    grad.addColorStop(0, '#fdf4ff');
    grad.addColorStop(1, '#fce7f3');
    ctx.fillStyle = grad;
    ctx.fillRect(0,0,400,400);

    // Progress bar
    ctx.fillStyle = '#e9d5ff';
    ctx.fillRect(0, 395, 400, 5);
    ctx.fillStyle = '#ec4899';
    ctx.fillRect(0, 395, (1 - gameTime/totalTime) * 400, 5);

    spawnTimer++;
    if (spawnTimer > 40) { spawnHeart(); spawnTimer = 0; }

    // Basket
    const bx = Math.max(0, Math.min(basket.x, 400 - basket.w));
    ctx.fillStyle = '#f9a8d4';
    ctx.beginPath();
    ctx.roundRect(bx, basket.y, basket.w, basket.h, 10);
    ctx.fill();
    ctx.fillStyle = '#ec4899';
    ctx.font = 'bold 14px Quicksand';
    ctx.textAlign = 'center';
    ctx.fillText('üéÄ', bx + basket.w/2, basket.y + 15);

    // Hearts
    const heartColors = ['#f472b6','#c084fc','#fb7185','#a78bfa','#f9a8d4'];
    hearts = hearts.filter(h => {
      h.y += h.speed;
      const color = heartColors[Math.floor(Math.random()*heartColors.length)];
      drawHeart(ctx, h.x, h.y, h.size, color);
      // Catch
      if (h.y + h.size > basket.y && h.x > bx && h.x < bx + basket.w) {
        gameScore++;
        document.getElementById('gameScoreDisplay').textContent = 'Score: ' + gameScore;
        spawnParticlesXY(h.x, basket.y + 400);
        return false;
      }
      return h.y < 420;
    });

    gameTime++;
    if (gameTime >= totalTime) {
      gameRunning = false;
      ctx.fillStyle = 'rgba(253,244,255,0.85)';
      ctx.fillRect(0,0,400,400);
      ctx.fillStyle = '#7c3aed';
      ctx.font = 'bold 28px Pacifico';
      ctx.textAlign = 'center';
      ctx.fillText('üéâ ' + gameScore + ' hearts caught!', 200, 185);
      ctx.font = 'bold 16px Quicksand';
      ctx.fillStyle = '#a855f7';
      ctx.fillText(gameScore > 20 ? 'You\'re amazing! üíñ' : 'Keep the love going! üíú', 200, 220);
      document.getElementById('gameNextBtn').style.display = 'inline-block';
      return;
    }
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);
}

// ---- PARTICLES ----
function spawnParticles(el) {
  const r = el.getBoundingClientRect();
  spawnParticlesXY(r.left + r.width/2, r.top + r.height/2);
}

function spawnParticlesXY(x, y) {
  const colors = ['#f9a8d4','#c084fc','#ec4899','#a855f7','#fbbf24'];
  for (let i = 0; i < 8; i++) {
    const p = document.createElement('div');
    p.className = 'particle';
    const size = Math.random() * 10 + 6;
    const angle = Math.random() * Math.PI * 2;
    const dist = Math.random() * 60 + 30;
    p.style.cssText = `
      width:${size}px;height:${size}px;
      left:${x}px;top:${y}px;
      background:${colors[Math.floor(Math.random()*colors.length)]};
      --tx:${Math.cos(angle)*dist}px;
      --ty:${Math.sin(angle)*dist}px;
    `;
    document.body.appendChild(p);
    setTimeout(() => p.remove(), 800);
  }
}

function fireworks() {
  for (let i = 0; i < 6; i++) {
    setTimeout(() => {
      spawnParticlesXY(Math.random() * window.innerWidth, Math.random() * window.innerHeight * 0.6);
    }, i * 150);
  }
}
</script>
</body>
</html>
